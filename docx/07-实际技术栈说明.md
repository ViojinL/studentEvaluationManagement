# 学生评教管理系统 - 实际技术栈说明

## 1. 实际技术栈

### 1.1 核心技术
- **开发语言**: Java 17+
- **UI框架**: Java Swing
- **数据库**: HSQLDB 2.7.1 (嵌入式数据库)
- **构建工具**: Maven
- **IDE**: 支持Java开发的任意IDE

### 1.2 数据库技术详情

#### HSQLDB特点
- **类型**: 嵌入式关系型数据库
- **存储模式**: 文件存储 (`jdbc:hsqldb:file:./data/student_evaluation_db`)
- **优势**:
  - 轻量级，无需独立数据库服务器
  - 完全用Java编写，与Java应用无缝集成
  - 支持标准SQL语法
  - 支持事务和ACID特性
  - 数据文件可直接复制备份

#### 连接方式
```java
// 数据库连接URL
private static final String DB_URL = "jdbc:hsqldb:file:./data/student_evaluation_db";
private static final String DB_USER = "SA";
private static final String DB_PASSWORD = "";

// 获取连接
public static Connection getConnection() throws SQLException {
    return DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);
}
```

### 1.3 项目结构（实际）
```
src/main/java/edu/ai/haut/
├── StudentEvaluationManagementSystem.java  # 主程序入口
├── model/                          # 数据模型层
│   ├── User.java                   # 用户抽象基类
│   ├── Student.java                # 学生类
│   ├── Teacher.java                # 教师类
│   ├── AcademicAffairsStaff.java   # 教务人员类
│   ├── Administrator.java          # 管理员类
│   ├── Course.java                 # 课程类
│   ├── ClassRoom.java              # 班级类
│   ├── CourseOffering.java         # 开课类
│   ├── EvaluationPeriod.java       # 评教周期类
│   ├── EvaluationCriteria.java     # 评教指标类
│   ├── EvaluationTemplate.java     # 评教模板类
│   └── Evaluation.java             # 评教记录类
├── service/                        # 业务服务层（直接数据访问）
│   ├── UserService.java            # 用户服务
│   ├── StudentService.java         # 学生服务
│   ├── TeacherService.java         # 教师服务
│   ├── AcademicAffairsStaffService.java # 教务人员服务
│   ├── AdministratorService.java   # 管理员服务
│   ├── CourseService.java          # 课程服务
│   ├── ClassService.java           # 班级服务
│   ├── EvaluationService.java      # 评教服务
│   ├── StatisticsService.java      # 统计服务
│   └── ManagementService.java      # 管理服务
├── ui/                             # 用户界面层
│   ├── LoginFrame.java             # 登录界面
│   ├── RegisterFrame.java          # 注册界面
│   ├── student/                    # 学生界面
│   ├── teacher/                    # 教师界面
│   ├── staff/                      # 教务人员界面
│   ├── admin/                      # 管理员界面
│   └── common/                     # 通用UI组件
└── util/                           # 工具类
    ├── DatabaseUtil.java           # 数据库工具类
    └── ValidationUtil.java         # 验证工具类
```

### 1.4 架构特点
- **无DAO层**: Service层直接使用DatabaseUtil进行数据库操作
- **简化设计**: 减少抽象层次，提高开发效率
- **集中管理**: DatabaseUtil统一管理数据库连接和操作
- **直接映射**: Service方法直接对应数据库操作

## 2. 数据库表结构（实际）

### 2.1 用户相关表

```sql
-- 学生表
CREATE TABLE IF NOT EXISTS students (
    student_id VARCHAR(20) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    gender VARCHAR(10),
    grade VARCHAR(10) NOT NULL,
    major VARCHAR(100) NOT NULL,
    class_id VARCHAR(20) NOT NULL,
    contact VARCHAR(50),
    password VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (class_id) REFERENCES classes(class_id)
);

-- 教师表
CREATE TABLE IF NOT EXISTS teachers (
    teacher_id VARCHAR(20) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    gender VARCHAR(10),
    title VARCHAR(50),
    college VARCHAR(100) NOT NULL,
    contact VARCHAR(50),
    password VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 教务人员表
CREATE TABLE IF NOT EXISTS academic_affairs_staff (
    staff_id VARCHAR(20) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    gender VARCHAR(10),
    department VARCHAR(100) NOT NULL,
    position VARCHAR(50),
    contact VARCHAR(50),
    password VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 管理员表
CREATE TABLE IF NOT EXISTS administrators (
    admin_id VARCHAR(20) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    gender VARCHAR(10),
    password VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 2.2 课程相关表

```sql
-- 课程表
CREATE TABLE IF NOT EXISTS courses (
    course_id VARCHAR(20) PRIMARY KEY,
    course_name VARCHAR(100) NOT NULL,
    credits DECIMAL(3,1) NOT NULL,
    course_type VARCHAR(20) NOT NULL,
    college VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 班级表
CREATE TABLE IF NOT EXISTS classes (
    class_id VARCHAR(20) PRIMARY KEY,
    class_name VARCHAR(100) NOT NULL,
    grade VARCHAR(10) NOT NULL,
    major VARCHAR(100) NOT NULL,
    college VARCHAR(100) NOT NULL,
    student_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 开课表
CREATE TABLE IF NOT EXISTS course_offerings (
    offering_id VARCHAR(20) PRIMARY KEY,
    course_id VARCHAR(20) NOT NULL,
    teacher_id VARCHAR(20) NOT NULL,
    class_id VARCHAR(20) NOT NULL,
    semester VARCHAR(20) NOT NULL,
    schedule VARCHAR(200),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (course_id) REFERENCES courses(course_id),
    FOREIGN KEY (teacher_id) REFERENCES teachers(teacher_id),
    FOREIGN KEY (class_id) REFERENCES classes(class_id)
);
```

### 2.3 评教相关表

```sql
-- 评教周期表
CREATE TABLE IF NOT EXISTS evaluation_periods (
    period_id VARCHAR(20) PRIMARY KEY,
    period_name VARCHAR(100) NOT NULL,
    semester VARCHAR(20) NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT '未开始',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 评教指标表
CREATE TABLE IF NOT EXISTS evaluation_criteria (
    criteria_id VARCHAR(20) PRIMARY KEY,
    criteria_name VARCHAR(100) NOT NULL,
    description CLOB,
    weight DECIMAL(5,2) NOT NULL,
    max_score INTEGER NOT NULL DEFAULT 100,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 评教记录表
CREATE TABLE IF NOT EXISTS evaluations (
    evaluation_id VARCHAR(20) PRIMARY KEY,
    student_id VARCHAR(20) NOT NULL,
    teacher_id VARCHAR(20) NOT NULL,
    course_id VARCHAR(20) NOT NULL,
    period_id VARCHAR(20) NOT NULL,
    criteria_scores CLOB,
    total_score DECIMAL(5,2) NOT NULL,
    comments CLOB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES students(student_id),
    FOREIGN KEY (teacher_id) REFERENCES teachers(teacher_id),
    FOREIGN KEY (course_id) REFERENCES courses(course_id),
    FOREIGN KEY (period_id) REFERENCES evaluation_periods(period_id)
);
```

## 3. 与设计文档的对应关系

### 3.1 架构设计对应
- **MVS架构**: 完全按照设计文档实现
- **分层结构**: Model-View-Service三层清晰分离
- **设计模式**: 单例模式(DatabaseUtil)、模板方法模式(BaseMainFrame)等

### 3.2 类设计对应
- **实体类**: 与设计文档中的类图完全对应
- **服务类**: 按照设计文档的接口和方法实现
- **UI类**: 继承关系和组合关系与设计一致

### 3.3 数据库设计对应
- **表结构**: 与设计文档基本一致，但使用HSQLDB语法
- **数据类型**: 
  - `ENUM` → `VARCHAR` (HSQLDB不支持ENUM)
  - `TEXT` → `CLOB` (HSQLDB的大文本类型)
  - `ENGINE=InnoDB` → 省略 (HSQLDB不需要)
  - `COMMENT` → 省略 (HSQLDB不支持列注释)

### 3.4 功能实现对应
- **用户管理**: 四种角色完全实现
- **课程管理**: 课程、开课、班级管理完整实现
- **评教管理**: 周期、指标、评教记录完整实现
- **统计分析**: 多维度统计分析功能实现

## 4. 部署和运行

### 4.1 环境要求
- Java 17或更高版本
- Maven 3.6+
- 无需独立数据库服务器

### 4.2 运行方式
```bash
# 编译项目
mvn clean compile

# 运行项目
mvn exec:java -Dexec.mainClass="edu.ai.haut.Main"

# 或者运行主类
java -cp target/classes edu.ai.haut.Main
```

### 4.3 数据文件
- 数据库文件位置: `./data/student_evaluation_db.*`
- 首次运行会自动创建数据库和表
- 数据文件可直接复制进行备份

## 5. 优势和特点

### 5.1 技术优势
- **零配置**: 无需安装配置数据库服务器
- **便携性**: 整个应用和数据可打包部署
- **轻量级**: 资源占用少，启动快速
- **标准化**: 使用标准SQL和JDBC

### 5.2 开发优势
- **简单部署**: 一键运行，无依赖
- **易于调试**: 数据库文件可直接查看
- **版本控制**: 可将测试数据纳入版本控制
- **跨平台**: Java跨平台特性完全保留

### 5.3 维护优势
- **备份简单**: 直接复制数据文件
- **迁移容易**: 复制整个应用目录即可
- **监控方便**: 通过文件系统监控数据库大小
- **升级平滑**: 数据库升级通过SQL脚本执行
